<?xml version="1.0" encoding="UTF-8" ?>

<chapter xml:id="ch03-data-applications">
  <title>Applications: Data</title>
  
  <section xml:id="sec-case-study-paralympics">
    <title>Case study: Olympic 1500m</title>
    
    <p>
      While many of you may be glued to the Olympic Games every four years (or every two years if you fancy both summer and winter sports), the Paralympic Games are less popular than the Olympic Games, even if they hold the same competitive thrills.
    </p>

    <p>
      The Paralympic Games began as a way to support soldiers who had been wounded in World War II as a way to help them rehabilitate.
      The first Paralympic Games were held in Rome, Italy in 1960.
      Since 1988 (Seoul, South Korea), the Paralympic Games have been held a few weeks later than the Olympic Games in the same city, in both the summer and winter.
    </p>

    <p>
      In this case study we introduce a dataset comparing Olympic and Paralympic gold medal finishers in the 1500m running competition (the Olympic <q>mile</q>, if a bit shorter than a full mile).
      The goal of the case study is to walk you through what a data scientist does when they first get a hold of a dataset.
      We also provide some <q>foreshadowing</q> of concepts and techniques we'll introduce in the next few chapters on exploratory data analysis.
      Last, we introduce <url href="https://en.wikipedia.org/wiki/Simpson%27s_paradox">Simpson's paradox</url> and discuss the importance of understanding the impact of multiple variables in an analysis.
    </p>

    <note>
      <title>Data</title>
      <p>
        The <url href="http://openintrostat.github.io/openintro/reference/paralympic_1500.html"><c>paralympic_1500</c></url> data can be found in the <url href="http://openintrostat.github.io/openintro"><term>openintro</term></url> R package.
      </p>
    </note>

    <p>
      <xref ref="tbl-paralympic-df-tail" /> shows the last five rows from the dataset, which are the five most recent 1500m races.
      Notice that there are racers from both the Men's and Women's divisions as well as those of varying visual impairment (T11, T12, T13, and Olympic).
      The T11 athletes have almost complete visual impairment, run with a black-out blindfold, and are allowed to run with a guide-runner.
      T12 and T13 athletes have some visual impairment, and the visual acuity of Olympic runners is not determined.
    </p>

    <p>
      When you encounter a new dataset, taking a peek at the last few rows as we did in <xref ref="tbl-paralympic-df-tail" /> should be instinctual.
      It can be helpful to look at the first few rows of the data as well to get a sense of other aspects of the data which may not be apparent in the last few rows.
      <xref ref="tbl-paralympic-df-head" /> shows the top five rows of the <c>paralympic_1500</c> dataset, which reveals that for at least the first five Olympiads, there were no runners in the Women's division or in the Paralympics.
    </p>

    <table xml:id="tbl-paralympic-df-tail">
      <title>Last five rows of the <c>paralympic_1500</c> dataset</title>
      <tabular>
        <row header="yes">
          <cell></cell>
          <cell>year</cell>
          <cell>city</cell>
          <cell>country_of_games</cell>
          <cell>division</cell>
          <cell>type</cell>
          <cell>name</cell>
          <cell>country_of_athlete</cell>
          <cell>time</cell>
          <cell>time_min</cell>
        </row>
        <row>
          <cell>69</cell>
          <cell>2021</cell>
          <cell>Tokyo</cell>
          <cell>Japan</cell>
          <cell>Men</cell>
          <cell>T11</cell>
          <cell>Yeltsin Jacques</cell>
          <cell>Brazil</cell>
          <cell>3:54.82</cell>
          <cell>3.914</cell>
        </row>
        <row>
          <cell>70</cell>
          <cell>2021</cell>
          <cell>Tokyo</cell>
          <cell>Japan</cell>
          <cell>Men</cell>
          <cell>T12</cell>
          <cell>Mohamed Amguoun</cell>
          <cell>Morocco</cell>
          <cell>3:52.54</cell>
          <cell>3.876</cell>
        </row>
        <row>
          <cell>71</cell>
          <cell>2021</cell>
          <cell>Tokyo</cell>
          <cell>Japan</cell>
          <cell>Men</cell>
          <cell>T13</cell>
          <cell>Abdellatif Baka</cell>
          <cell>Algeria</cell>
          <cell>3:50.31</cell>
          <cell>3.839</cell>
        </row>
        <row>
          <cell>72</cell>
          <cell>2021</cell>
          <cell>Tokyo</cell>
          <cell>Japan</cell>
          <cell>Women</cell>
          <cell>T13</cell>
          <cell>Somaya Bousaid</cell>
          <cell>Tunisia</cell>
          <cell>4:27.32</cell>
          <cell>4.455</cell>
        </row>
        <row>
          <cell>73</cell>
          <cell>2021</cell>
          <cell>Tokyo</cell>
          <cell>Japan</cell>
          <cell>Men</cell>
          <cell>Olympic</cell>
          <cell>Jakob Ingebrigtsen</cell>
          <cell>Norway</cell>
          <cell>3:28.32</cell>
          <cell>3.472</cell>
        </row>
      </tabular>
    </table>

    <table xml:id="tbl-paralympic-df-head">
      <title>First five rows of the <c>paralympic_1500</c> dataset</title>
      <tabular>
        <row header="yes">
          <cell></cell>
          <cell>year</cell>
          <cell>city</cell>
          <cell>country_of_games</cell>
          <cell>division</cell>
          <cell>type</cell>
          <cell>name</cell>
          <cell>country_of_athlete</cell>
          <cell>time</cell>
          <cell>time_min</cell>
        </row>
        <row>
          <cell>1</cell>
          <cell>1896</cell>
          <cell>Athens</cell>
          <cell>Greece</cell>
          <cell>Men</cell>
          <cell>Olympic</cell>
          <cell>Edwin Flack</cell>
          <cell>Australia</cell>
          <cell>4:33.2</cell>
          <cell>4.553</cell>
        </row>
        <row>
          <cell>2</cell>
          <cell>1900</cell>
          <cell>Paris</cell>
          <cell>France</cell>
          <cell>Men</cell>
          <cell>Olympic</cell>
          <cell>Charles Bennett</cell>
          <cell>Great Britain</cell>
          <cell>4:06.2</cell>
          <cell>4.103</cell>
        </row>
        <row>
          <cell>3</cell>
          <cell>1904</cell>
          <cell>St. Louis</cell>
          <cell>United States</cell>
          <cell>Men</cell>
          <cell>Olympic</cell>
          <cell>James Lightbody</cell>
          <cell>United States</cell>
          <cell>4:05.4</cell>
          <cell>4.090</cell>
        </row>
        <row>
          <cell>4</cell>
          <cell>1908</cell>
          <cell>London</cell>
          <cell>United Kingdom</cell>
          <cell>Men</cell>
          <cell>Olympic</cell>
          <cell>Mel Sheppard</cell>
          <cell>United States</cell>
          <cell>4:03.4</cell>
          <cell>4.057</cell>
        </row>
        <row>
          <cell>5</cell>
          <cell>1912</cell>
          <cell>Stockholm</cell>
          <cell>Sweden</cell>
          <cell>Men</cell>
          <cell>Olympic</cell>
          <cell>Arnold Jackson</cell>
          <cell>Great Britain</cell>
          <cell>3:56.8</cell>
          <cell>3.947</cell>
        </row>
      </tabular>
    </table>

    <p>
      At this stage it's also useful to think about how the data were collected, as that will inform the scope of any inference you can make based on your analysis of the data.
    </p>

    <exercise>
      <title>Guided Practice</title>
      <statement>
        <p>
          Do these data come from an observational study or an experiment?
        </p>
      </statement>
      <solution>
        <p>
          This is an observational study.
          Researchers collected data on past gold medal race times in both Olympic and Paralympic Games.
        </p>
      </solution>
    </exercise>

    <exercise>
      <title>Guided Practice</title>
      <statement>
        <p>
          There are 73 rows and 9 columns in the dataset.
          What does each row and each column represent?
        </p>
      </statement>
      <solution>
        <p>
          Each row represents a 1500m gold medal race and each column represents a variable containing information on each race.
        </p>
      </solution>
    </exercise>

    <p>
      Once you've identified the rows and columns, it's useful to review the data dictionary to learn about what each column in the dataset represents.
      The data dictionary is provided in <xref ref="tbl-paralympic-var-def" />.
    </p>

    <table xml:id="tbl-paralympic-var-def">
      <title>Variables and their descriptions for the <c>paralympic_1500</c> dataset</title>
      <tabular>
        <row header="yes">
          <cell>Variable</cell>
          <cell>Description</cell>
        </row>
        <row>
          <cell><c>year</c></cell>
          <cell>Year the Games took place.</cell>
        </row>
        <row>
          <cell><c>city</c></cell>
          <cell>City of the Games.</cell>
        </row>
        <row>
          <cell><c>country_of_games</c></cell>
          <cell>Country of the Games.</cell>
        </row>
        <row>
          <cell><c>division</c></cell>
          <cell>Division: <c>Men</c> or <c>Women</c>.</cell>
        </row>
        <row>
          <cell><c>type</c></cell>
          <cell>Type: <c>Olympic</c>, <c>T11</c>, <c>T12</c>, or <c>T13</c>.</cell>
        </row>
        <row>
          <cell><c>name</c></cell>
          <cell>Name of the athlete.</cell>
        </row>
        <row>
          <cell><c>country_of_athlete</c></cell>
          <cell>Country of athlete.</cell>
        </row>
        <row>
          <cell><c>time</c></cell>
          <cell>Time of gold medal race, in m:s.</cell>
        </row>
        <row>
          <cell><c>time_min</c></cell>
          <cell>Time of gold medal race, in decimal minutes (min + sec/60).</cell>
        </row>
      </tabular>
    </table>

    <p>
      We now have a better sense of what each column represents, but we do not yet know much about the characteristics of each of the variables.
    </p>

    <example>
      <title>Worked Example</title>
      <statement>
        <p>
          Determine whether each variable in the <c>paralympic_1500</c> dataset is numerical or categorical.
          For numerical variables, further classify them as continuous or discrete.
          For categorical variables, determine if the variable is ordinal.
        </p>
      </statement>
      <solution>
        <p>
          The numerical variables in the dataset are <c>year</c> (discrete), and <c>time_min</c> (continuous).
          The categorical variables are <c>city</c>, <c>country_of_games</c>, <c>division</c>, <c>type</c>, <c>name</c>, and <c>country_of_athlete</c>.
          The <c>time</c> variable is trickier to classify<mdash/>we can think of it as numerical, but it is classified as categorical.
          The categorical classification is due to the colon <c>:</c> which separates the minutes from the seconds.
          Sometimes the data dictionary (presented in <xref ref="tbl-paralympic-var-def" />) isn't sufficient for a complete analysis, and we need to go back to the data source and try to understand the data better before we can proceed with the analysis meaningfully.
        </p>
      </solution>
    </example>

    <p>
      Next, let's try to get to know each variable a little bit better.
      For categorical variables, this involves figuring out what their levels are and how commonly represented they are in the data.
      <xref ref="fig-paralympic-cat" /> shows the distributions of two of the categorical variables in this dataset.
      We can see that the United States has hosted the Games most often, but runners from Great Britain and Kenya have won the 1500m most often.
      There are a large number of countries who have had a single gold medal winner of the 1500m.
      Similarly, there are a large number of countries who have hosted the Games only once.
      Over the last century, the name describing the country for athletes from one particular region has changed and includes Russian Federation, Unified Team, and Russian Paralympic Committee.
      Both of the visualizations are bar plots, which you will learn more about in <xref ref="sec-explore-categorical" />.
    </p>

    <figure xml:id="fig-paralympic-cat">
      <caption>Distributions of categorical variables in the <c>paralympic_1500</c> dataset. Left panel: Country of origin of the athlete. Right panel: Country in which the Games took place.</caption>
      <sidebyside widths="45% 45%">
        <image source="images/fig-paralympic-cat-2.png">
          <description>Bar plot showing the number of gold medal athletes from each country. Great Britain has had 8 top finishers, Kenya has had 7 top finishers, and Tunisia and Algeria have both had 5.</description>
        </image>
        <image source="images/fig-paralympic-cat-1.png">
          <description>Bar plot showing the number of Games which have happened in each country. The USA has hosted 4 Games, the UK has hosted 3 Games, and each of Japan, Greece, Germany, France, and Australia have hosted the Games twice.</description>
        </image>
      </sidebyside>
    </figure>

    <p>
      Similarly, we can examine the distributions of the numerical variables as well.
      We already know that the 1500m times are mostly between 3.5min and 4.5min, based on <xref ref="tbl-paralympic-df-tail" /> and <xref ref="tbl-paralympic-df-head" />.
      We can break down the 1500m time by division and type of race.
      <xref ref="tbl-paralympic-summary" /> shows the mean, minimum, and maximum 1500m times broken down by division and race type.
      Recall that the Men's Olympic division has taken place since 1896, whereas the Men's Paralympic division has happened only since 1960.
      The maximum race time, therefore, should be taken into context in terms of the year of the Games.
    </p>

    <table xml:id="tbl-paralympic-summary">
      <title>Mean, minimum, and maximum of the gold medal times for the 1500m race broken down by division and type of race</title>
      <tabular>
        <row header="yes">
          <cell>division</cell>
          <cell>type</cell>
          <cell>mean</cell>
          <cell>min</cell>
          <cell>max</cell>
        </row>
        <row>
          <cell>Men</cell>
          <cell>Olympic</cell>
          <cell>3.742</cell>
          <cell>3.260</cell>
          <cell>4.553</cell>
        </row>
        <row>
          <cell>Men</cell>
          <cell>T11</cell>
          <cell>3.975</cell>
          <cell>3.767</cell>
          <cell>4.263</cell>
        </row>
        <row>
          <cell>Men</cell>
          <cell>T12</cell>
          <cell>3.912</cell>
          <cell>3.732</cell>
          <cell>4.087</cell>
        </row>
        <row>
          <cell>Men</cell>
          <cell>T13</cell>
          <cell>3.802</cell>
          <cell>3.602</cell>
          <cell>4.087</cell>
        </row>
        <row>
          <cell>Women</cell>
          <cell>T13</cell>
          <cell>4.504</cell>
          <cell>4.455</cell>
          <cell>4.552</cell>
        </row>
      </tabular>
    </table>

    <p>
      <alert>Fun fact!</alert>
      Sometimes playing around with the dataset will uncover interesting elements about the context in which the data were collected.
      A scatterplot of the Men's 1500m broken down by race type shows that, in each given year, the Olympic runner is substantially faster than the Paralympic runners, with one exception.
      In the Rio de Janeiro 2016 Games, the <url href="https://www.paralympic.org/news/remarkable-finish-1500m-rio-2016">T13 gold medal athlete ran faster (3:48.29) than the Olympic gold medal athlete (3:50.00)</url> (see <xref ref="fig-paralympic-rio" />).
      In fact, some internet sleuthing tells you that the <em>top four</em> T13 finishers all finished the 1500m under 3:50.00!
    </p>

    <figure xml:id="fig-paralympic-rio">
      <caption>1500m race time for Men's Olympic and Paralympic athletes. Dashed grey line represents the Rio Games in 2016.</caption>
      <image source="images/fig-paralympic-rio-1.png" width="80%">
        <description>A scatterplot with year on the x-axis and gold medal 1500m time on the y-axis. The points are colored by which group the athlete is in - T11, T12, T13, or Olympic. A vertical line at 2016 shows that in the Rio Games the T13 gold medal athlete was faster than the Olympic gold medal athlete.</description>
      </image>
    </figure>

    <p>
      So far we examined aspects of some of the individual variables, and we have broken down the 1500m race times in terms of division and race type.
      You might have already wondered how the race times vary across year.
      The <c>paralympic_1500</c> dataset will provide us with an ability to explore an important statistical concept, Simpson's paradox.
    </p>

  </section>

  <section xml:id="sec-simpsons-paradox">
    <title>Simpson's paradox</title>
    
    <p>
      Simpson's paradox<idx>Simpson's paradox</idx> is a description of three (or more) variables.
      The paradox happens when a third variable reverses the relationship between the first two variables.
    </p>

    <p>
      Let's start by considering how the 1500m gold medal race times have changed over year.
      <xref ref="fig-paralympic-ungrouped" /> shows a scatterplot describing 1500m race times and year for Men's Olympic and Paralympic (T11) athletes with a line of best fit (to the entire dataset) superimposed (see <xref ref="sec-model-slr" /> where we will present fitting a line to a scatterplot).
      Notice that the line of best fit shows a <em>positive</em> relationship between race time and year.
      That is, for later years, the predicted gold medal time is higher than in earlier years.
    </p>

    <figure xml:id="fig-paralympic-ungrouped">
      <caption>1500m race time for Men's Olympic and Paralympic (T11) athletes. The line represents a line of best fit to the entire dataset.</caption>
      <image source="images/fig-paralympic-ungrouped-1.png" width="80%">
        <description>A scatterplot with year on the x-axis and gold medal 1500m time on the y-axis. A line of best fit is drawn over the points.</description>
      </image>
    </figure>

    <p>
      Of course, both your eye and your intuition are likely telling you that it wouldn't make any sense to try to model all of the athletes together.
      Instead, a separate model should be run for each of the two types of Games: Olympic and Paralympic (T11).
      <xref ref="fig-paralympic-grouped" /> shows a scatterplot describing 1500m race times and year for Men's Olympic and Paralympic (T11) athletes with a line of best fit superimposed separately for each of the two types of races.
      Notice that within each type of race, the relationship between 1500m race time and year is now <em>negative</em>.
    </p>

    <figure xml:id="fig-paralympic-grouped">
      <caption>1500m race time for Men's Olympic and Paralympic (T11) athletes. The best fit line is now fit separately to the Olympic and Paralympic athletes.</caption>
      <image source="images/fig-paralympic-grouped-1.png" width="80%">
        <description>A scatterplot with year on the x-axis and gold medal 1500m time on the y-axis. The points are colored by the type of athlete - T11 or Olympic. Lines of best fit are drawn separately for the two groups (T11 and Olympic).</description>
      </image>
    </figure>

    <assemblage xml:id="assemblage-simpsons-paradox">
      <title>Simpson's paradox</title>
      <p>
        Simpson's paradox happens when an association or relationship between two variables in one direction (e.g., positive) reverses (e.g., becomes negative) when a third variable is considered.
      </p>
    </assemblage>

    <p>
      Simpson's paradox was seen in the 1500m race data because the aggregate data showed a positive relationship (positive slope) between year and race time but a negative relationship (negative slope) between year and race time when broken down by the type of race.
    </p>

    <p>
      Simpson's paradox is observed with categorical data and with numeric data.
      Often the paradox happens because the third variable (here, race type) is imbalanced.
      There are either more observations in one group or the observations happen at different intervals across the two groups.
      In the 1500m data, we saw that the T11 runners had fewer observations and their times were both generally slower and more recent than the Olympic runners.
    </p>

    <p>
      In the 1500m analysis, it would be most prudent to report the trends separately for the Olympic and the T11 athletes.
      However, in other situations, it might be better to aggregate the data and report the overall trend.
      Many additional examples of Simpson's paradox and a further exploration is given in <xref ref="Witmer:2021" />.
    </p>

    <p>
      In this case study, we introduced you to the very first steps a data scientist takes when they start working with a new dataset.
      In the next few chapters, we will introduce exploratory data analysis, and you'll learn more about the various types of data visualizations and summary statistics you can make to get to know your data better.
    </p>

    <p>
      Before you move on, we encourage you to think about whether the following questions can be answered with this dataset, and if yes, how you might go about answering them?
      It's okay if your answer is <q>I'm not sure</q>, we simply want to get your exploratory juices flowing to prime you for what's to come!
    </p>

    <p>
      <ol>
        <li>
          <p>Has there ever been a year when a visually impaired Paralympic gold medal athlete beat the Olympic gold medal athlete?</p>
        </li>
        <li>
          <p>When comparing the Paralympic and Olympic 1500m gold medal athletes, does Simpson's paradox hold in the Women's division?</p>
        </li>
        <li>
          <p>Is there a biological boundary which establishes a time under which no human could run 1500m?</p>
        </li>
      </ol>
    </p>

  </section>

  <section xml:id="sec-data-tutorials">
    <title>Interactive R tutorials</title>
    
    <p>
      Navigate the concepts you've learned in this part in R using the following self-paced tutorials.
      All you need is your browser to get started!
    </p>

    <p>
      <url href="https://openintrostat.github.io/ims-tutorials/01-data/">Tutorial 1: Introduction to data</url>
    </p>

    <p>
      <ul>
        <li>
          <p><url href="https://openintro.shinyapps.io/ims-01-data-01/">Tutorial 1 - Lesson 1: Language of data</url></p>
        </li>
        <li>
          <p><url href="https://openintro.shinyapps.io/ims-01-data-02/">Tutorial 1 - Lesson 2: Types of studies</url></p>
        </li>
        <li>
          <p><url href="https://openintro.shinyapps.io/ims-01-data-03/">Tutorial 1 - Lesson 3: Sampling strategies and experimental design</url></p>
        </li>
        <li>
          <p><url href="https://openintro.shinyapps.io/ims-01-data-04/">Tutorial 1 - Lesson 4: Case study</url></p>
        </li>
      </ul>
    </p>

    <p>
      You can also access the full list of tutorials supporting this book at
      <url href="https://openintrostat.github.io/ims-tutorials">https://openintrostat.github.io/ims-tutorials</url>.
    </p>

  </section>

  <section xml:id="sec-data-labs">
    <title>R labs</title>
    
    <p>
      Further apply the concepts you've learned in this part in R with computational labs that walk you through a data analysis case study.
    </p>

    <p>
      <url href="https://www.openintro.org/go?id=ims-r-lab-intro-to-r">Intro to R - Birth rates</url>
    </p>

    <p>
      You can also access the full list of labs supporting this book at
      <url href="https://www.openintro.org/go?id=ims-r-labs">https://www.openintro.org/go?id=ims-r-labs</url>.
    </p>

  </section>

</chapter>
